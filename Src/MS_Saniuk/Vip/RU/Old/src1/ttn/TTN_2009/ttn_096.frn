.begin
  kounter  := kounter + 1;

#ifdef _IN_VAL_DOC_
  ‘β„‘ ζ := ‘β„‘ ;
  ‘β ζ  := ‘β ;
  ‘β ζ‘  := ‘β ‘;
#else
  ‘β„‘ ζ := ‘β„‘ ζ0;
  ‘β ζ  := ‘β ζ0;
  ‘β ζ‘  := ‘β ζ‘0;
#end
!β®£®Άλ¥ αγ¬¬¬λ
  €„‘ ζ   := €„‘ ζ   + ‘β„‘ ζ;
  €‘β ζ  := €‘β ζ  + ‘β ζ;
  €‘β ζ‘  := €‘β ζ‘  + ‘β ζ‘;
  €‘β ζ‘ := €‘β ζ‘ + if (ΰ¨§­ _– = 1, ‘β ζ‘, ‘β ζ);

  var tMassaBrItog: double;

  tMassaBrItog := 0;

  if (ΰ¨§­ _– = 1)
  {
    if (bAutoGrM)
      sumkolf  := sumkolf  + if(…„_‡……_ƒ“‡‚›•_…‘’ = '­/γ', 0, ‹_ƒ“‡‚›•_…‘’)
    else
      sumkolf  := sumkolf  + if(‹_ƒ“‡‚›•_…‘’ <> 0, ‹_ƒ“‡‚›•_…‘’,
                              if(…„_‡……_ƒ“‡‚›•_…‘’ = '­/γ', 0, ®«”));
    case wRoundMass2 of
      0..2 : tMassaBrItog := Round(®«‚¥α / 1000, wRoundMass2) * 1000;
      3..5 : tMassaBrItog := Round(®«‚¥α, wRoundMass2 mod 3);
      6..12: tMassaBrItog := Round(®«‚¥α * 1000, wRoundMass2 mod 3) / 1000;
    end;
  }

#ifdef _TTN_FRN_
  #ifdef _TTN_ALC_
    sumves := sumves + if (wRoundMass2 > 3, Round(®«‚¥α, wRoundMass2 - 3), Round(®«‚¥α));
  #else
    sumves := sumves + tMassaBrItog;
  #end
#end

!β®£¨ ―® αβΰ ­¨ζ ¬
  str€‘β ζ  := str€‘β ζ  + ‘β ζ;
  str€„‘ ζ   := str€„‘ ζ   + ‘β„‘ ζ;
  str€‘β ζ‘  := str€‘β ζ‘  + ‘β ζ‘;
  str€‘β ζ‘ := str€‘β ζ‘ + if (ΰ¨§­ _– = 1, ‘β ζ‘, ‘β ζ);

  if (ΰ¨§­ _– = 1)
  {
    if (bAutoGrM)
      str€®«” := str€®«” + if(…„_‡……_ƒ“‡‚›•_…‘’ = '­/γ', 0, ‹_ƒ“‡‚›•_…‘’)
    else
      str€®«” := str€®«” + if(‹_ƒ“‡‚›•_…‘’ <> 0, ‹_ƒ“‡‚›•_…‘’,
                             if(…„_‡……_ƒ“‡‚›•_…‘’ = '­/γ', 0, ®«”));

#ifdef _TTN_FRN_
  #ifdef _TTN_ALC_
    str€®«‚¥α  := str€®«‚¥α  + if (wRoundMass2 > 3, Round(®«‚¥α, wRoundMass2 - 3), Round(®«‚¥α));
  #else
    str€®«‚¥α  := str€®«‚¥α  + tMassaBrItog;
  #end
#end
  }

  // ―ΰ®ζ¥­β α¨¤¨ ¨§ „
  var KolZnCena: word;

  KolZnCena  := if (isValDoc, GetPrecisionGroup('brForSopr_RVPrice'), GetPrecisionGroup('brForSopr_Price'));
  PrSkidkaDO := (1 - ‘γ¬¬ „ / Round(®«_„_―« * –¥­ „, KolZnCena)) * 100;

! §΅¨Ά  ­  αβΰ®¨ €…‚€ ¨ €„€
var lnSName, lnSCode, KolLine, lnSPrim: word
#ifdef _TTN_FRN_
  #ifdef _TTN_2009F_
    lnSName  := 35;
    lnSPrim  := 29;

  #ifdef _TTN_2009P_
    lnSName  := 26;
    lnSPrim  := 18;
    lnSCode  := 0;
  #else
    lnSCode  := 0;
  #end

  #ifdef _TTN_2009R_
    lnSName  := 19;
    lnSCode  := 0;
  #end
#else
!@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@³
  lnSName   := 47;
  lnSPrim   := 39;
  lnSCode   := 0;
  #end
#end

#ifdef _TN2_PC_FRN_
!³@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@³
  #ifdef _TTN_2009F_
   lnSName    := 24;
   lnSCode    := 0;
   lnSPrim    := 26;
  #else
   lnSName    := 32;
   lnSCode    := 0;
   lnSPrim    := 25;
  #end
#end

  KolLine := 0;

   §Ά ­¨¥_„®― := oPrnSoprFun.GetNazvanieDop( §Ά ­¨¥, ®¤–, „®―®«­¨β¥«μ­ ο_¨­δ®ΰ¬ ζ¨ο, αβΰ ­ _ΆΆ®§ );

  ®¤–_„®― := ®¤–;

  if (length( §Ά ­¨¥_„®―) > lnSName)
     OR (length(®¤–_„®―) > lnSCode)
  {
    KolLine  := KolAddInStr ( §Ά ­¨¥_„®―, lnSName, true);//®«. ¤®―. αβΰ®

    var tKolLine: word;
    tKolLine := KolAddInStr (®¤–_„®―, lnSCode, true);

    if (tKolLine > KolLine)
      KolLine := tKolLine;

    kounter  := kounter + KolLine;

    if (kounter > fixkol)
      kounter := fixkol;
  }

end.
