//------------------------------------------------------------------------------
//                                                      (c) корпорация Галактика
// Галактика 7.12 - Спецоснастка
// Константы модуля "Учет спецоборудования и спецоснастки"
//------------------------------------------------------------------------------

Const

//-------------------------------------------------------------------------
// Минимальное принимаемое во внимание значение суммы, процента, количества

  MBPMinDbl = 0.000000000001; // можно ужесточить еще на три знака

//-------------------------------------------------------------------------
// Текущая панель в окне Карточки Учета спецоснастки

  paKatMBP = 0;
  paMBPIn  = 1;
  paMBPOut = 2;

//-------------------------------------------------------------------------
// Типы ДОКУМЕНТОВ спецоснастки - поле MBPMove.Status

  mbpPostDoc =   1;  // Поступление - пока резерв
  mbpMoveDoc =   2;  // Внутреннее перемещение
  mbpInExDoc =   4;  // Ввод в эксплуатацию
  mbpSpisDoc =   5;  // Акт на списание
  mbpIznoDoc =   6;  // Ведомость начисления износа
  mbpNewPDoc =   7;  // Ведомость переоценки
  mbpFrExDoc =   8;  // Возврат из эксплуатации
  mbpOverDoc =   9;  // Оприходование излишка
  mbpLostDoc =  10;  // Списание недостачи
  mbpInvtDoc =  11;  // Акт инвентаризации
  mbpPMovDoc =  12;  // Перевод в другое подразделение
  mbpInMCDoc = 604;  // Возврат на склад МЦ
  mbpFrMCDoc = 602;  // Передача МЦ в Спецоснастку, значение KatSopr.VidSopr

//-------------------------------------------------------------------------
// Способы формирования Актов на списание - поле MBPMove.wParams[1]
  spisRglMBP = 1;
  spisRglSFO = 2;
  spisOutDoc = 3;
  spisUvlDoc = 4;
  spisGrpOut = 5;
  spisRglCrd = 6;

  spRglMBPEd = 101;
  spRglSFOEd = 102;
  spOutDocEd = 103;
  spUvlDocEd = 104;
  spGrpOutEd = 105;
  spRglCrdEd = 106;

//-------------------------------------------------------------------------
// Типы ОПЕРАЦИЙ прихода спецоснастки - поле MBPIn.InState

  mbpCntOpIn = 9;   // Количество типов операций прихода спецоснастки

  mbpPostOp  = 1;   // Поступление просто
  mbpMoveOp  = 2;   // Внутреннее перемещение, cSopr -> MBPMove.NRec
  mbpFrMCOp  = 3;   // Поступление со склада МЦ, как исключение cSopr -> KatSopr.NRec
                    //                                          cMBPOut -> SpSopr.NRec
  mbpInExOp  = 4;   // Ввод в эксплуатацию
  mbpNewPOp  = 7;   // Операция переоценки
  mbpFrExOp  = 8;   // Возврат из эксплуатации
  mbpOverOp  = 9;   // Оприходование излишка
  mbpChgPOp  = 10;  // Операция разделения прихода
  mbpInSald  = 11;  // Остатки на дату удаления старой информации

//-------------------------------------------------------------------------
// Типы ОПЕРАЦИЙ расхода спецоснастки - поле MBPOut.Status

  mbpCntOpOut = 4;  // Количество типов операций расхода спецоснастки
  mbpCountOp = mbpCntOpIn + mbpCntOpOut; // Количество типов операций спецоснастки

  mbpIznoOp  = 1;   // Начисление износа
  mbpSpisOp  = 4;   // Списание

  mbpLostOp  = 3;   // Недостача
  mbpOutsOp  = 2;   // Уход. "Куда" определяется значением dopStat см. ниже

// Значения дополнительного флага операции расхода - поле MBPOut.DopStat

  mbpDpStMove = 0;  // Уход по внутреннему перемещению, вводу и возврату из экспл., переоценке - определяется по типу прихода
  mbpDpStInMC = 1;  // Передано в МЦ
  mbpDpStInOS = 2;  // Передано в ОС

//-------------------------------------------------------------------------
// Значения SoprHoz.TiDk для операций спецоснастки

  mbpCntSHIn = 5;   // Количество типов Хозопераций по операциям прихода спецоснастки
  mbpCntSHOut= 4;   // Количество типов Хозопераций по операциям расхода спецоснастки
  mbpCountSH = mbpCntSHIn + mbpCntSHOut; // Количество типов Хозопераций по спецоснастки

  mbpNoSH    = 0;   // Операция без соответствующего SoprHoz-а

// Приходы
  mbpPostSH  = 12;  // Приход, поступление - просто, поступление со склада МЦ, ввод в экспл.
  mbpMoveSH  = 20;  // Внутреннее перемещение
  mbpNewPSH  = 80;  // Ведомость переоценки
  mbpFrExSH  = 28;  // Возврат из эксплуатации
  mbpOverSH  = 704; // Оприходование излишка

// Расходы
  mbpIznoSH  = 13;  // Начисление износа
  mbpSpisSH  = 19;  // Списание (передача в ОС)
  mbpInMCSH  = 29;  // Передача спецоснастки в МЦ
  mbpLostSH  = 703; // Недостача

//-------------------------------------------------------------------------
// Порядковые номера полей таблицы MBPIn для проверки корректности в
// cmCheckField и позиционирования в cmCheckRecord. Значение определяет
// последовательность контроля.

  fldNotDefined     =  0;

  fldMBPIn_dIn      =  1;
  fldMBPIn_Nom      =  2;
  fldMBPIn_cOrg     =  3;
  fldMBPIn_cPodrF   =  4;
  fldMBPIn_cMolF    =  5;
  fldMBPIn_cPartyF  =  6;
  fldMBPIn_Price    =  7;
  fldMBPIn_KolDoc   =  8;
  fldMBPIn_PercDoc  =  9;
  fldMBPIn_PercNach = 10;
  fldMBPIn_KolFact  = 11;
  fldMBPIn_TPercent = 12;
  fldMBPIn_InState  = 13;
  fldMBPIn_cMBP     = 14;
  fldMBPIn_cPodr    = 15;
  fldMBPIn_cMol     = 16;
  fldMBPIn_cSopr    = 17;
  fldMBPIn_cMbpOut  = 18;
  fldMBPIn_DateSpis = 19;
  fldMBPIn_InEkspl  = 20;
  fldMBPIn_DateEksp = 21;
  fldMBPIn_DateEnd  = 22;
  fldMBPIn_DopInfo  = 23;
  fldMBPIn_cPers    = 24;
  fldMBPIn_ExtMod   = 25;
/*
  fldMBPIn_Status   = 26;
  fldMBPIn_DateZero = 27;
*/
  mbpInFld_Count    = 25;

//-------------------------------------------------------------------------
// Порядковые номера полей таблицы MBPOut для проверок корректности.

  fldMBPOut_dOut     =  1;
  fldMBPOut_Status   =  2;
  fldMBPOut_cMBPIn   =  3;
  fldMBPOut_Kol      =  4;
  fldMBPOut_Percent  =  5;
  fldMBPOut_tKOL     =  6;
  fldMBPOut_tPercent =  7;
  fldMBPOut_Nom      =  8;
  fldMBPOut_cMove    =  9;
  fldMBPOut_cPrSpis  = 10;
  fldMBPOut_dopStat  = 11;
  fldMBPOut_ExtMod   = 12;

//  Обработку этих ВЫЧИСЛЯЕМЫХ полей оказалось удобно перенести в бизнес-логику
  fldMBPOut_Summa    = 13;
  fldMBPOut_SummaIsn = 14;

  mbpOutFld_Count    = 12; // В PostCanChFld() последние два поля не обрабатываются

//-------------------------------------------------------------------------
// Порядковые номера полей таблицы MBPMove для проверок корректности

  fldMBPMove_Status   =  1;
  fldMBPMove_Nom      =  2;
  fldMBPMove_dMove    =  3;
  fldMBPMove_cPodrF   =  4;
  fldMBPMove_cMolF    =  5;
  fldMBPMove_cPodrT   =  6;
  fldMBPMove_cMolT    =  7;
  fldMBPMove_cMBPMove =  8;
  fldMBPMove_cRecs1   =  9; // ТХО
  fldMBPMove_cRecs2   = 10; // Работник
  fldMBPMove_dOpr     = 11; // cValOld
  fldMBPMove_DesGr    = 12;
  fldMBPMove_Descr    = 13;
  fldMBPMove_cRecs3   = 14;
  fldMBPMove_cRecs4   = 15; // Работник Откуда

  fldMBPMove_Summa    = 16;
  fldMBPMove_SummaIsn = 17;

  mbpMoveFld_Count    = 17;

//-------------------------------------------------------------------------
// Коды предупреждений о деталях выполнения функций бизнес-логики

  cfMBPRef2Dc =    1; // Операция связана с документом
  cfMBPFromMC =    2; // Предметы поступили по накладной Склад->Спецоснастка
  cfMBPIntoMC =    4; // Передача спецоснастки в МЦ
  cfMBPIntoOS =    8; // Передача спецоснастки в ОС
  cfMBPOborot =   16; // Имеются проводки по операции
  cfMBPChldOp =   32; // C приходом производились операции либо расход по перемещению
  cfMBPNextOp =   64; // Были операции расхода с большей датой, зависящие от данной операции
  cfMBPNdSpis =  128; // В соответствии с методикой требуется автосписание (ввод в эксплуатацию или 100%)
  cfMBPClosed =  256; // Операция находится в закрытом периоде
  cfMBPZPrice =  512; // Приход с нулевой ценой
  cfMBPNchIzn = 1024; // Не требуется начисления износа в соответствии с методикой
  cfSFOByNorm = 2048; // Выдача СФО сформирована на основании нормы
  cfMBPDocSpc = 4096; // Документ спецоснастки содержит строки спецификации
  cfMBPEmpSpc = 8192; // Документ НЕ содержит строк спецификации
  cfMBPRefSFO =16384; // Операция спецоснастки связана с выдачей СФО
  cfMBPRealDc =32768; // Операция спецоснастки связана с документами на реализацию спецоснастки/СФО
  cfMBPProvDc =65536; // Операция спецоснастки связана с проведенным документом

//-------------------------------------------------------------------------
// Контексты вызова процедур проверки запроса подтверждения

  ccxLogics =  0; // из бизнес-логики
  ccxMBPCrd =  1; // из КУ спецоснастки
  ccxPrsMBP =  2; // из ЛК учета спецоснастки
  ccxMBPDoc =  3; // из группового документа спецоснастки
  ccxOsOper =  4; // из операции поступления ОС
  ccxMCNakl =  5; // из накладной склад->спецоснастка
  ccxFantom =  6; // из фантомной операции расхода
  ccxParent =  7; // вызов из родительского прихода
  ccxBatFun =  8; // вызов из пакетной функции
  ccxRet2MC =  9; // вызов из документа возврата спецоснастки на склад
  ccxPrsSFO = 10; // вызов из операции выдачи СФО
  ccxUvlSFO = 11; // вызов из документа расчетов при увольнении
  ccxDocSFO = 12; // вызов из документа СФО для проверки возможности изменения даты
  ccxIndivd = 14; // рассматривать отдельно спецоснастку и СФО при вводе в эксплуатацию, перемещении и т.д.

// end;
